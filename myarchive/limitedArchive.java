package myarchive;
import wsiarchive.*;


//ein begrenztes Archiv
public class limitedArchive implements IArchive {
    private String name;
    private IArchive archive;
    private int maxSize;
    private int currentSize;
    
    limitedArchive(String name, IArchive archive, int maxSize) {
        this.name = name;
        this.archive = archive;
        this.maxSize = maxSize;
        this.currentSize = 0;
    }
    
    
    // Name des Archivs liefern
    public String getName() {
        return this.name;
    }

    // Item ins Archiv schreiben
    public wsiarchive.IPutResult put(Item item) {
        // Wenn das neue Item die maximale Kapazität überschreitet.
        // dann mach nichts.
        if ((item.getSize() + this.currentSize) <= this.maxSize) {
            // Aktuell verfügbarer speicher aktualisieren
            this.currentSize = this.currentSize + item.getSize();
            return this.archive.put(item);
        }
        else {
            return new FullPutResult();
        }
    }
   
    
    // Mehrere Items ins Archiv schreiben
    public wsiarchive.IPutResultList putMultiple(wsiarchive.IItemList items) {
        if (items instanceof wsiarchive.EmptyItemList) {
            return new wsiarchive.EmptyPutResultList();
        }
        else {
            wsiarchive.PairItemList items1 = (wsiarchive.PairItemList) items;
            PairItemList items2 = (PairItemList) items1.toMyItemList();
            return new wsiarchive.PairPutResultList(
                this.put(items1.getFirst()),
                this.putMultiple(items2.getRest().toWSIItemList())
            );
        }
    }
    
    // Item aus Archiv auslesen
    public wsiarchive.IGetResult get(IItemId id) {
        return this.archive.get(id);
    }
}
