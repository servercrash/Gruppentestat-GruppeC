package myarchive;

import wsiarchive.*;
import org.junit.*;


public class PairArchiveAndPredicateListTest extends de.tuebingen.informatik.Test {

    // some random generators :)
    public IItemId getRandomId() {
        return ((OKPutResult) new WORM("random").put(new Item("chx", 666))).getId();
    }
    
    // Prädikate
    IItemPredicate pr1 = new MyPredicate("Item 1", 200);
    IItemPredicate pr2 = new MyPredicate("Item 2", 200);
    IItemPredicate pr3 = new MyPredicate("Item 5", 400);
    IItemPredicate pr4 = new MyPredicate("Item 4", 100);

    //Beispiele für Teilarchive
    limitedArchive la1 = new limitedArchive("Teilarchiv 1", new WORM("Worm"), 200);
    limitedArchive la2 = new limitedArchive("Teilarchiv 2", new WORM("Worm"), 300);
    limitedArchive la3 = new limitedArchive("Teilarchiv 3", new WORM("Worm"), 200);

    limitedArchive la4 = new limitedArchive("Teilarchiv 4", new WORM("Worm"), 300);
    // leere liste
    IArchiveAndPredicateList e = new EmptyArchiveAndPredicateList();
    
    IArchiveAndPredicateList pl1 = new PairArchiveAndPredicateList(
        pr1, la1, e);
    IArchiveAndPredicateList pl2 = new PairArchiveAndPredicateList(
        pr2, la3, pl1); 
    IArchiveAndPredicateList pl3 = new PairArchiveAndPredicateList(
        pr4, la2, pl2);
    
    //Beispiele für Items
    Item i1 = new Item("Item 1", 200);
    Item i2 = new Item("Item 2", 300);
    Item i3 = new Item("Item 3", 400);
    Item i4 = new Item("Item 4", 100);
    
    IArchive sa = new SemanticArchive("Semantic Archive", pl1, la3);
    
        
    IItemList items = new PairItemList(
        i1, new PairItemList(
        i4, new EmptyItemList()));
        
    //überprüfen ob ein Result vom Typ OKPutResult ist
    public boolean isOKPutResult(IPutResult result) {
        return (result instanceof OKPutResult);
    }
        
    @Test
    public void put(){
        checkExpect(pl2.put(i2), new FullPutResult());
        checkExpect(this.isOKPutResult(pl3.put(i4)), true);
    }
    
    @Test
    public void get(){
        IPutResult putresult = pl3.put(i4);
        OKPutResult okresult = (OKPutResult) putresult;
        checkExpect(pl3.get(okresult.getId()), new ItemResult(i4));
    }
   
    
}
