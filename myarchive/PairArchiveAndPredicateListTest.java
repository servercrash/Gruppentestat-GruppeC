package myarchive;

import wsiarchive.*;
import org.junit.*;


public class PairArchiveAndPredicateListTest extends de.tuebingen.informatik.Test {

    // some random generators :)
    public IItemId getRandomId() {
        return ((OKPutResult) new WORM("random").put(new Item("chx", 666))).getId();
    }
    
    //Beispiele für Prädikate
    IItemPredicate pr1 = new MyPredicate("Item 1", 200);
    IItemPredicate pr2 = new MyPredicate("Item 2", 200);
    IItemPredicate pr3 = new MyPredicate("Item 5", 400);
    IItemPredicate pr4 = new MyPredicate("Item 4", 100);

    //Beispiele für Teilarchive
    
    //begrenztes Teilarchiv bestehend aus einem Worm und einer maximalen Größe von 200 MB
    limitedArchive la1 = new limitedArchive("Teilarchiv 1", new WORM("Worm"), 200);
    //begrenztes Teilarchiv bestehend aus einem Worm und einer maximalen Größe von 300 MB
    limitedArchive la2 = new limitedArchive("Teilarchiv 2", new WORM("Worm"), 300);
    //begrenztes Teilarchiv bestehend aus einem Worm und einer maximalen Größe von 200 MB
    limitedArchive la3 = new limitedArchive("Teilarchiv 3", new WORM("Worm"), 200);
    //begrenztes Teilarchiv bestehend aus einem Worm und einer maximalen Größe von 300 MB
    limitedArchive la4 = new limitedArchive("Teilarchiv 4", new WORM("Worm"), 300);
   
    // leere ArchiveAndPredicate Liste
    IArchiveAndPredicateList e = new EmptyArchiveAndPredicateList();
    //ArchiveAndPredicateListe bestehend aus dem Prädikat pr1, dem Teilarchiv la1 und einer leeren Liste
    IArchiveAndPredicateList pl1 = new PairArchiveAndPredicateList(
        pr1, la1, e);
    //ArchiveAndPredicateListe bestehend aus dem Prädikat pr2, dem Teilarchiv la3 und einer leeren Liste    
    IArchiveAndPredicateList pl2 = new PairArchiveAndPredicateList(
        pr2, la3, pl1); 
    //ArchiveAndPredicateListe bestehend aus dem Prädikat pr4, dem Teilarchiv la2 und einer leeren Liste
    IArchiveAndPredicateList pl3 = new PairArchiveAndPredicateList(
        pr4, la2, pl2);
    
    //Beispiele für Items
    Item i1 = new Item("Item 1", 200); //Item mit dem Inhalt Item1 und der Größe 200 MB
    Item i2 = new Item("Item 2", 300); //Item mit dem Inhalt Item2 und der Größe 300 MB
    Item i3 = new Item("Item 3", 400); //Item mit dem Inhalt Item3 und der Größe 400 MB
    Item i4 = new Item("Item 4", 100); //Item mit dem Inhalt Item4 und der Größe 100 MB
    
    
    //Beispiel für ein Semantic Archiv
    IArchive sa = new SemanticArchive("Semantic Archive", pl1, la3);
    
    //Beispiel für eine Liste aus Items    
    IItemList items = new PairItemList(
        i1, new PairItemList(
        i4, new EmptyItemList()));
        
    //überprüfen ob ein Result vom Typ OKPutResult ist
    public boolean isOKPutResult(IPutResult result) {
        return (result instanceof OKPutResult);
    }
    
    //Testfälle für put
    @Test
    public void put(){
        checkExpect(pl2.put(i2), new FullPutResult());
        checkExpect(this.isOKPutResult(pl3.put(i4)), true); 
    }
    
    //Testfälle für get
    @Test
    public void get(){
        IPutResult putresult = pl3.put(i4);
        OKPutResult okresult = (OKPutResult) putresult;
        checkExpect(pl3.get(okresult.getId()), new ItemResult(i4));
    }
   
    
}
